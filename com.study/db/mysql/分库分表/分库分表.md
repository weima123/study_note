## 一.基本概念
### 1.读写分离
```
多个数据库之间表数据同步，其中部分数据库负责读写操作，部分数据库负责读操作
```
### 2.分库
```
将同一份表数据分散存储在多个数据库中，其中每个数据库表数据不同步
```
### 3.分表
```
将表数据分散存放在多个表中，不同表之间数据不同步
```

## 二.全局唯一主键生成方法
### 1.主键id自增
````
优点：数据库本身支持,
缺点：Id可能会重复
````

### 2.设置数据库自增偏移和步长
```
## 假设总共有 10 个分表
## 级别可选: SESSION(会话级), GLOBAL(全局)
SET @@SESSION.auto_increment_offset = 1; ## 起始值, 分别取值为 1~10
SET @@SESSION.auto_increment_increment = 10; ## 步长增量
缺点：扩容后需要做数据迁移
```

### 2.全局Id映射表
```
在redis中生成全局唯一主键盘，定期同步到全局数据库中
缺点：redis内的全局唯一键需要定期同步到全局数据库中，
````
### 3.UUID
```
优点：全局唯一
缺点：浪费数据库空间
```

### 4.雪花算法



## 三.分库分表方案
### 1.应用层
```
mycat
```
### 2.业务层
```
tddl sharding-jdbc
```

## 四、扩容问题
### 1.停机+数据迁移
### 2.从节点升级
### 3.双写方案

## 五.分区key的选择问题

## 六.非分区key的分页查询问题
```
查询所有复合条件的从表|从库的数据，在业务代码内做分页处理
```